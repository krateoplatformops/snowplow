apiVersion: templates.krateo.io/v1
kind: RESTAction
metadata:
  name: list-pods
  namespace: demo-system
spec:
  - name: allPods
    path: "/api/v1/pods"
    verb: GET
    headers:
    - 'Accept: application/json'
---
apiVersion: templates.krateo.io/v1
kind: Widget
metadata:
  name: internal-api
  namespace: demo-system
spec:
  type: card
  propsRef:
    name: card-props
    namespace: demo-system 
  actions:
  - selector: .allPods.items[:3]
    template:
      apiVersion: v1
      resource: pods
      name: ${ .metadata.name }
      namespace: ${ .metadata.namespace }
  data:
    selector: .allPods.items[:5]
    set:
    - name: "title"
      value: ${ .metadata.name }
    - name: "content"
      value: ${ .spec.containers[0] | .image }
  apiRef:
    name: list-pods
    namespace: demo-system
