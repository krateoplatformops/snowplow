apiVersion: templates.krateo.io/v1
kind: RESTAction
metadata:
  name: internal-api
  namespace: demo-system
spec:
  api:
  - name: namespaces
    path: "/api/v1/namespaces?limit=10"
    filter: "[.items[] | {name: .metadata.name}]"
  - name: pods
    dependOn: namespaces
    iterator: .[]
    path: ${ "/api/v1/namespaces/" + (.name) + "/pods" }
    filter: "[.items[] | .metadata | {name: .name, namespace: .namespace, uid: .uid}]"
